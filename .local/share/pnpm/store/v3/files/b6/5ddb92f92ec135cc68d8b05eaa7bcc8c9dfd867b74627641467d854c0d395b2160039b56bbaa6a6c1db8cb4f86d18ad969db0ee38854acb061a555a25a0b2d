{"version":3,"file":"CodeMirrorProxy-3836f097.js","sources":["../../src/codemirror/extensions/useCodeMirrorTheme.ts","../../src/codemirror/defaultCodeModes.ts","../../src/codemirror/extensions/highlightLineExtension.ts","../../src/codemirror/extensions/useFontSize.ts","../../src/codemirror/extensions/theme.ts","../../src/codemirror/CodeMirrorProxy.tsx"],"sourcesContent":["import {rgba, useTheme} from '@sanity/ui'\nimport {useMemo} from 'react'\nimport {createTheme} from '@uiw/codemirror-themes'\nimport {tags as t} from '@lezer/highlight'\nimport {Extension} from '@codemirror/state'\n\nexport function useCodeMirrorTheme(): Extension {\n  const theme = useTheme()\n\n  return useMemo(() => {\n    const {code: codeFont} = theme.sanity.fonts\n    const {base, card, dark, syntax} = theme.sanity.color\n\n    return createTheme({\n      theme: dark ? 'dark' : 'light',\n      settings: {\n        background: card.enabled.bg,\n        foreground: card.enabled.code.fg,\n        lineHighlight: card.enabled.bg,\n        fontFamily: codeFont.family,\n        caret: base.focusRing,\n        selection: rgba(base.focusRing, 0.2),\n        selectionMatch: rgba(base.focusRing, 0.4),\n        gutterBackground: card.disabled.bg,\n        gutterForeground: card.disabled.code.fg,\n        gutterActiveForeground: card.enabled.fg,\n      },\n      styles: [\n        {\n          tag: [t.heading, t.heading2, t.heading3, t.heading4, t.heading5, t.heading6],\n          color: card.enabled.fg,\n        },\n        {tag: t.angleBracket, color: card.enabled.code.fg},\n        {tag: t.atom, color: syntax.keyword},\n        {tag: t.attributeName, color: syntax.attrName},\n        {tag: t.bool, color: syntax.boolean},\n        {tag: t.bracket, color: card.enabled.code.fg},\n        {tag: t.className, color: syntax.className},\n        {tag: t.comment, color: syntax.comment},\n        {tag: t.definition(t.typeName), color: syntax.function},\n        {\n          tag: [\n            t.definition(t.variableName),\n            t.function(t.variableName),\n            t.className,\n            t.attributeName,\n          ],\n          color: syntax.function,\n        },\n        {tag: [t.function(t.propertyName), t.propertyName], color: syntax.function},\n        {tag: t.keyword, color: syntax.keyword},\n        {tag: t.null, color: syntax.number},\n        {tag: t.number, color: syntax.number},\n        {tag: t.meta, color: card.enabled.code.fg},\n        {tag: t.operator, color: syntax.operator},\n        {tag: t.propertyName, color: syntax.property},\n        {tag: [t.string, t.special(t.brace)], color: syntax.string},\n        {tag: t.tagName, color: syntax.className},\n        {tag: t.typeName, color: syntax.keyword},\n      ],\n    })\n  }, [theme])\n}\n","import {StreamLanguage} from '@codemirror/language'\nimport {type Extension} from '@codemirror/state'\n\nexport interface CodeMode {\n  name: string\n  loader: ModeLoader\n}\nexport type ModeLoader = () => Promise<Extension | undefined> | Extension | undefined\n\nexport const defaultCodeModes: CodeMode[] = [\n  {\n    name: 'groq',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) => javascript({jsx: false})),\n  },\n  {\n    name: 'javascript',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) => javascript({jsx: false})),\n  },\n  {\n    name: 'jsx',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) => javascript({jsx: true})),\n  },\n  {\n    name: 'typescript',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) =>\n        javascript({jsx: false, typescript: true})\n      ),\n  },\n  {\n    name: 'tsx',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) =>\n        javascript({jsx: true, typescript: true})\n      ),\n  },\n  {name: 'php', loader: () => import('@codemirror/lang-php').then(({php}) => php())},\n  {name: 'sql', loader: () => import('@codemirror/lang-sql').then(({sql}) => sql())},\n  {\n    name: 'mysql',\n    loader: () => import('@codemirror/lang-sql').then(({sql, MySQL}) => sql({dialect: MySQL})),\n  },\n  {name: 'json', loader: () => import('@codemirror/lang-json').then(({json}) => json())},\n  {\n    name: 'markdown',\n    loader: () => import('@codemirror/lang-markdown').then(({markdown}) => markdown()),\n  },\n  {name: 'java', loader: () => import('@codemirror/lang-java').then(({java}) => java())},\n  {name: 'html', loader: () => import('@codemirror/lang-html').then(({html}) => html())},\n  {\n    name: 'csharp',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/clike').then(({csharp}) =>\n        StreamLanguage.define(csharp)\n      ),\n  },\n  {\n    name: 'sh',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/shell').then(({shell}) => StreamLanguage.define(shell)),\n  },\n  {\n    name: 'css',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/css').then(({css}) => StreamLanguage.define(css)),\n  },\n  {\n    name: 'scss',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/css').then(({css}) => StreamLanguage.define(css)),\n  },\n  {\n    name: 'sass',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/sass').then(({sass}) => StreamLanguage.define(sass)),\n  },\n  {\n    name: 'ruby',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/ruby').then(({ruby}) => StreamLanguage.define(ruby)),\n  },\n  {\n    name: 'python',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/python').then(({python}) =>\n        StreamLanguage.define(python)\n      ),\n  },\n  {\n    name: 'xml',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/xml').then(({xml}) => StreamLanguage.define(xml)),\n  },\n  {\n    name: 'yaml',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/yaml').then(({yaml}) => StreamLanguage.define(yaml)),\n  },\n  {\n    name: 'golang',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/go').then(({go}) => StreamLanguage.define(go)),\n  },\n  {name: 'text', loader: () => undefined},\n  {name: 'batch', loader: () => undefined},\n]\n","/* eslint-disable no-param-reassign */\n\nimport {Extension, StateEffect, StateField} from '@codemirror/state'\nimport {Decoration, EditorView, lineNumbers} from '@codemirror/view'\nimport {ThemeContextValue, rgba} from '@sanity/ui'\n\nconst highlightLineClass = 'cm-highlight-line'\n\nexport const addLineHighlight = StateEffect.define<number>()\nexport const removeLineHighlight = StateEffect.define<number>()\n\nexport const lineHighlightField = StateField.define({\n  create() {\n    return Decoration.none\n  },\n  update(lines, tr) {\n    lines = lines.map(tr.changes)\n    for (const e of tr.effects) {\n      if (e.is(addLineHighlight)) {\n        lines = lines.update({add: [lineHighlightMark.range(e.value)]})\n      }\n      if (e.is(removeLineHighlight)) {\n        lines = lines.update({\n          filter: (from) => {\n            // removeLineHighlight value is lineStart for the highlight, so keep other effects\n            return from !== e.value\n          },\n        })\n      }\n    }\n    return lines\n  },\n  toJSON(value, state) {\n    const highlightLines: number[] = []\n    const iter = value.iter()\n    while (iter.value) {\n      const lineNumber = state.doc.lineAt(iter.from).number\n      if (!highlightLines.includes(lineNumber)) {\n        highlightLines.push(lineNumber)\n      }\n      iter.next()\n    }\n    return highlightLines\n  },\n  fromJSON(value: number[], state) {\n    const lines = state.doc.lines\n    const highlights = value\n      .filter((line) => line <= lines) // one-indexed\n      .map((line) => lineHighlightMark.range(state.doc.line(line).from))\n    return Decoration.none.update({\n      add: highlights,\n    })\n  },\n  provide: (f) => EditorView.decorations.from(f),\n})\n\nconst lineHighlightMark = Decoration.line({\n  class: highlightLineClass,\n})\n\nexport const highlightState: {\n  [prop: string]: StateField<any>\n} = {\n  highlight: lineHighlightField,\n}\n\nexport interface HighlightLineConfig {\n  onHighlightChange?: (lines: number[]) => void\n  readOnly?: boolean\n  theme: ThemeContextValue\n}\n\nfunction createCodeMirrorTheme(options: {themeCtx: ThemeContextValue}) {\n  const {themeCtx} = options\n  const dark = {color: themeCtx.theme.color.dark[themeCtx.tone]}\n  const light = {color: themeCtx.theme.color.light[themeCtx.tone]}\n\n  return EditorView.baseTheme({\n    '.cm-lineNumbers': {\n      cursor: 'default',\n    },\n    '.cm-line.cm-line': {\n      position: 'relative',\n    },\n\n    // need set background with pseudoelement so it does not render over selection color\n    [`.${highlightLineClass}::before`]: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: -3,\n      content: \"''\",\n      boxSizing: 'border-box',\n    },\n    [`&dark .${highlightLineClass}::before`]: {\n      background: rgba(dark.color.muted.caution.pressed.bg, 0.5),\n    },\n    [`&light .${highlightLineClass}::before`]: {\n      background: rgba(light.color.muted.caution.pressed.bg, 0.75),\n    },\n  })\n}\n\nexport const highlightLine = (config: HighlightLineConfig): Extension => {\n  const highlightTheme = createCodeMirrorTheme({themeCtx: config.theme})\n\n  return [\n    lineHighlightField,\n    config.readOnly\n      ? []\n      : lineNumbers({\n          domEventHandlers: {\n            mousedown: (editorView, lineInfo) => {\n              // Determine if the line for the clicked gutter line number has highlighted state or not\n              const line = editorView.state.doc.lineAt(lineInfo.from)\n              let isHighlighted = false\n              editorView.state\n                .field(lineHighlightField)\n                .between(line.from, line.to, (from, to, value) => {\n                  if (value) {\n                    isHighlighted = true\n                    return false // stop iteration\n                  }\n                  return undefined\n                })\n\n              if (isHighlighted) {\n                editorView.dispatch({effects: removeLineHighlight.of(line.from)})\n              } else {\n                editorView.dispatch({effects: addLineHighlight.of(line.from)})\n              }\n              if (config?.onHighlightChange) {\n                config.onHighlightChange(editorView.state.toJSON(highlightState).highlight)\n              }\n              return true\n            },\n          },\n        }),\n    highlightTheme,\n  ]\n}\n\n/**\n * Adds and removes highlights to the provided view using highlightLines\n * @param view\n * @param highlightLines\n */\nexport function setHighlightedLines(view: EditorView, highlightLines: number[]): void {\n  const doc = view.state.doc\n  const lines = doc.lines\n  //1-based line numbers\n  const allLineNumbers = Array.from({length: lines}, (x, i) => i + 1)\n  view.dispatch({\n    effects: allLineNumbers.map((lineNumber) => {\n      const line = doc.line(lineNumber)\n      if (highlightLines?.includes(lineNumber)) {\n        return addLineHighlight.of(line.from)\n      }\n      return removeLineHighlight.of(line.from)\n    }),\n  })\n}\n","import {Extension} from '@codemirror/state'\nimport {EditorView} from '@codemirror/view'\nimport {rem, useTheme} from '@sanity/ui'\nimport {useMemo} from 'react'\n\nexport function useFontSizeExtension(props: {fontSize: number}): Extension {\n  const {fontSize: fontSizeProp} = props\n  const theme = useTheme()\n\n  return useMemo(() => {\n    const {code: codeFont} = theme.sanity.fonts\n    const {fontSize, lineHeight} = codeFont.sizes[fontSizeProp] || codeFont.sizes[2]\n\n    return EditorView.baseTheme({\n      '&': {\n        fontSize: rem(fontSize),\n      },\n\n      '& .cm-scroller': {\n        lineHeight: `${lineHeight / fontSize} !important`,\n      },\n    })\n  }, [fontSizeProp, theme])\n}\n","import {Extension} from '@codemirror/state'\nimport {EditorView} from '@codemirror/view'\nimport {rgba, useRootTheme} from '@sanity/ui'\nimport {useMemo} from 'react'\n\nexport function useThemeExtension(): Extension {\n  const themeCtx = useRootTheme()\n\n  return useMemo(() => {\n    const dark = {color: themeCtx.theme.color.dark[themeCtx.tone]}\n    const light = {color: themeCtx.theme.color.light[themeCtx.tone]}\n\n    return EditorView.baseTheme({\n      '&.cm-editor': {\n        height: '100%',\n      },\n      '&.cm-editor.cm-focused': {\n        outline: 'none',\n      },\n\n      // Matching brackets\n      '&.cm-editor.cm-focused .cm-matchingBracket': {\n        backgroundColor: 'transparent',\n      },\n      '&.cm-editor.cm-focused .cm-nonmatchingBracket': {\n        backgroundColor: 'transparent',\n      },\n      '&dark.cm-editor.cm-focused .cm-matchingBracket': {\n        outline: `1px solid ${dark.color.base.border}`,\n      },\n      '&dark.cm-editor.cm-focused .cm-nonmatchingBracket': {\n        outline: `1px solid ${dark.color.base.border}`,\n      },\n      '&light.cm-editor.cm-focused .cm-matchingBracket': {\n        outline: `1px solid ${light.color.base.border}`,\n      },\n      '&light.cm-editor.cm-focused .cm-nonmatchingBracket': {\n        outline: `1px solid ${light.color.base.border}`,\n      },\n\n      // Size and padding of gutter\n      '& .cm-lineNumbers .cm-gutterElement': {\n        minWidth: `32px !important`,\n        padding: `0 8px !important`,\n      },\n      '& .cm-gutter.cm-foldGutter': {\n        width: `0px !important`,\n      },\n\n      // Color of gutter\n      '&dark .cm-gutters': {\n        color: `${rgba(dark.color.card.enabled.code.fg, 0.5)} !important`,\n        borderRight: `1px solid ${rgba(dark.color.base.border, 0.5)}`,\n      },\n      '&light .cm-gutters': {\n        color: `${rgba(light.color.card.enabled.code.fg, 0.5)} !important`,\n        borderRight: `1px solid ${rgba(light.color.base.border, 0.5)}`,\n      },\n    })\n  }, [themeCtx])\n}\n","import {forwardRef, useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport CodeMirror, {ReactCodeMirrorProps, ReactCodeMirrorRef} from '@uiw/react-codemirror'\nimport {useCodeMirrorTheme} from './extensions/useCodeMirrorTheme'\nimport {Extension} from '@codemirror/state'\nimport {CodeInputConfigContext} from './CodeModeContext'\nimport {defaultCodeModes} from './defaultCodeModes'\nimport {\n  highlightLine,\n  highlightState,\n  setHighlightedLines,\n} from './extensions/highlightLineExtension'\nimport {EditorView} from '@codemirror/view'\nimport {useRootTheme} from '@sanity/ui'\nimport {useFontSizeExtension} from './extensions/useFontSize'\nimport {useThemeExtension} from './extensions/theme'\n\nexport interface CodeMirrorProps extends ReactCodeMirrorProps {\n  highlightLines?: number[]\n  languageMode?: string\n  onHighlightChange?: (lines: number[]) => void\n}\n\n/**\n * CodeMirrorProxy is a wrapper component around CodeMirror that we lazy load to reduce initial bundle size.\n *\n * It is also responsible for integrating any CodeMirror extensions.\n */\nconst CodeMirrorProxy = forwardRef<ReactCodeMirrorRef, CodeMirrorProps>(function CodeMirrorProxy(\n  props,\n  ref\n) {\n  const {\n    basicSetup: basicSetupProp,\n    highlightLines,\n    languageMode,\n    onHighlightChange,\n    readOnly,\n    value,\n    ...codeMirrorProps\n  } = props\n\n  const themeCtx = useRootTheme()\n  const codeMirrorTheme = useCodeMirrorTheme()\n  const [editorView, setEditorView] = useState<EditorView | undefined>(undefined)\n\n  // Resolve extensions\n  const themeExtension = useThemeExtension()\n  const fontSizeExtension = useFontSizeExtension({fontSize: 1})\n  const languageExtension = useLanguageExtension(languageMode)\n  const highlightLineExtension = useMemo(\n    () =>\n      highlightLine({\n        onHighlightChange,\n        readOnly,\n        theme: themeCtx,\n      }),\n    [onHighlightChange, readOnly, themeCtx]\n  )\n\n  const extensions = useMemo(() => {\n    const baseExtensions = [\n      themeExtension,\n      fontSizeExtension,\n      highlightLineExtension,\n      EditorView.lineWrapping,\n    ]\n    if (languageExtension) {\n      return [...baseExtensions, languageExtension]\n    }\n    return baseExtensions\n  }, [fontSizeExtension, highlightLineExtension, languageExtension, themeExtension])\n\n  useEffect(() => {\n    if (editorView) {\n      setHighlightedLines(editorView, highlightLines ?? [])\n    }\n  }, [editorView, highlightLines, value])\n\n  const initialState = useMemo(() => {\n    return {\n      json: {\n        doc: value ?? '',\n        selection: {\n          main: 0,\n          ranges: [{anchor: 0, head: 0}],\n        },\n        highlight: highlightLines ?? [],\n      },\n      fields: highlightState,\n    }\n    // only need to calculate this on initial render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleCreateEditor = useCallback((view: EditorView) => {\n    setEditorView(view)\n  }, [])\n\n  const basicSetup = useMemo(\n    () =>\n      basicSetupProp ?? {\n        highlightActiveLine: false,\n      },\n    [basicSetupProp]\n  )\n\n  return (\n    <CodeMirror\n      {...codeMirrorProps}\n      value={value}\n      ref={ref}\n      extensions={extensions}\n      theme={codeMirrorTheme}\n      onCreateEditor={handleCreateEditor}\n      initialState={initialState}\n      basicSetup={basicSetup}\n    />\n  )\n})\n\nfunction useLanguageExtension(mode?: string) {\n  const codeConfig = useContext(CodeInputConfigContext)\n\n  const [languageExtension, setLanguageExtension] = useState<Extension | undefined>()\n\n  useEffect(() => {\n    const customModes = codeConfig?.codeModes ?? []\n    const modes = [...customModes, ...defaultCodeModes]\n\n    const codeMode = modes.find((m) => m.name === mode)\n    if (!codeMode?.loader) {\n      console.warn(\n        `Found no codeMode for language mode ${mode}, syntax highlighting will be disabled.`\n      )\n    }\n    let active = true\n    Promise.resolve(codeMode?.loader())\n      .then((extension) => {\n        if (active) {\n          setLanguageExtension(extension)\n        }\n      })\n      .catch((e) => {\n        console.error(`Failed to load language mode ${mode}`, e)\n        if (active) {\n          setLanguageExtension(undefined)\n        }\n      })\n    return () => {\n      active = false\n    }\n  }, [mode, codeConfig])\n\n  return languageExtension\n}\n\nexport default CodeMirrorProxy\n"],"names":["useCodeMirrorTheme","theme","useTheme","useMemo","code","codeFont","sanity","fonts","base","card","dark","syntax","color","createTheme","settings","background","enabled","bg","foreground","fg","lineHighlight","fontFamily","family","caret","focusRing","selection","rgba","selectionMatch","gutterBackground","disabled","gutterForeground","gutterActiveForeground","styles","tag","t","tags","heading","heading2","heading3","heading4","heading5","heading6","angleBracket","atom","keyword","attributeName","attrName","bool","boolean","bracket","className","comment","definition","typeName","function","variableName","propertyName","null","number","meta","operator","property","string","special","brace","tagName","defaultCodeModes","name","loader","then","javascript","jsx","typescript","php","sql","MySQL","dialect","json","markdown","java","html","csharp","StreamLanguage","define","shell","css","sass","ruby","python","xml","yaml","go","highlightLineClass","addLineHighlight","StateEffect","removeLineHighlight","lineHighlightField","StateField","create","Decoration","none","update","lines","tr","map","changes","e","effects","is","add","lineHighlightMark","range","value","filter","from","toJSON","state","highlightLines","iter","lineNumber","doc","lineAt","includes","push","next","fromJSON","highlights","line","provide","f","EditorView","decorations","class","highlightState","highlight","createCodeMirrorTheme","options","themeCtx","tone","light","baseTheme","cursor","position","top","bottom","left","right","zIndex","content","boxSizing","muted","caution","pressed","highlightLine","config","highlightTheme","readOnly","lineNumbers","domEventHandlers","mousedown","editorView","lineInfo","isHighlighted","field","between","to","dispatch","of","onHighlightChange","setHighlightedLines","view","allLineNumbers","Array","length","x","i","useFontSizeExtension","props","fontSize","fontSizeProp","lineHeight","sizes","rem","useThemeExtension","useRootTheme","height","outline","backgroundColor","border","minWidth","padding","width","borderRight","CodeMirrorProxy","forwardRef","ref","basicSetup","basicSetupProp","languageMode","codeMirrorProps","codeMirrorTheme","setEditorView","useState","themeExtension","fontSizeExtension","languageExtension","useLanguageExtension","highlightLineExtension","extensions","baseExtensions","lineWrapping","useEffect","initialState","main","ranges","anchor","head","fields","handleCreateEditor","useCallback","highlightActiveLine","CodeMirror","default","onCreateEditor","mode","codeConfig","useContext","CodeInputConfigContext","setLanguageExtension","_a","customModes","codeModes","modes","codeMode","find","m","console","warn","active","Promise","resolve","extension","catch","error"],"mappings":"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"}